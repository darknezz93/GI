<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Mercator projection</title>
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<script src="http://d3js.org/topojson.v1.min.js"></script>
		<link rel="stylesheet" type="text/css" href="http://localhost:8000/map.css" media="screen" />
	</head>
	<body>


	<div id="container">
		<h1>World map centered on European countries</h1>

	</div>
		

		<script type="text/javascript">

			//Width and height
			var w = 800;
			var h = 600;
            
            var div = d3.select("body").append("div")
                      .attr("class", "tooltip")
                      .style("opacity", 0);

			//Define map projection


			var projection = d3.geo.mercator() //utiliser une projection standard pour aplatir les p√¥les, voir D3 projection plugin
								   .center([ 13, 52 ]) //comment centrer la carte, longitude, latitude
								   .translate([ w/2, h/2 ]) // centrer l'image obtenue dans le svg
								   .scale([ w/1.5 ]); // zoom, plus la valeur est petit plus le zoom est gros 

			//Define path generator
			var path = d3.geo.path()
							 .projection(projection);


			//Create SVG
			var svg = d3.select("#container")
						.append("svg")
						.attr("width", w)
						.attr("height", h);

			//Load in GeoJSON data
			d3.json("http://localhost:8000/ne_50m_admin_0_countries_simplified.json", function(json) {
				
				//Bind data and create one path per GeoJSON feature
				svg.selectAll("path")
				   .data(json.features)
				   .enter()
				   .append("path")
				   .attr("d", path)
				   .attr("stroke", "rgba(8, 81, 156, 0.2)")
				   .attr("fill", "rgba(8, 81, 156, 0.6)")
                   .on("mouseover", function(d,i) {
                        var value = 1;
                        div.transition()
                        .duration(200)
                        .style("opacity", 0.9);
                        div.html("<b>Nazwa panstwa</b><br/>" + value + "%")
                        .style("left", (d3.event.pageX) + "px")
                        .style("top", (d3.event.pageY - 28) + "px");
                    })
                    .on("mouseout", function(d,i) {
                        div.transition()
                        .duration(500)
                        .style("opacity", 0);
                    });
                
			});

		</script>
	</body>
</html>